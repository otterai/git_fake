# 🚀 Optimized Auto Commit Workflow
# 🔄 Saves commits in a single folder without recreating it every time

name: 🚀 Auto Commit  

on:
  schedule:
    - cron: "*/10 * * * *"  # ⏳ Runs every 10 minutes
  workflow_dispatch:  # 🔄 Manual trigger option

jobs:
  commit:
    runs-on: ubuntu-latest

    steps:
      # 📌 Checkout Repository
      - name: 📂 Checkout Repo
        uses: actions/checkout@v3

      # 🔧 Configure Git User
      - name: 🛠 Set Git User
        run: |
          git config --global user.name "otterai"
          git config --global user.email "uncle@flash.co"

      # 📂 Ensure Commit Folder Exists (Runs Only Once)
      - name: 📂 Create Commit Folder (if not exists)
        run: |
          [ -d auto_commits ] || mkdir auto_commits  # Creates only if missing

      # ⏳ Random Delay (Makes Commit Timing Unpredictable)
      - name: ⏳ Adding Random Delay
        run: |
          sleep $(( RANDOM % 120 ))  # Waits randomly between 0-120 seconds

      # 📝 Generate Random File & Commit
      - name: 📝 Create & Push Commit
        run: |
          FILE_NAME="auto_commits/commit_$(date +%Y%m%d%H%M%S)_$(( RANDOM % 100 )).txt"
          echo "🚀 Auto Commit at $(date) - Random: $RANDOM" > $FILE_NAME
          git add $FILE_NAME
          git commit -m "✨ Automated Commit - $(date)"
          git push
          
